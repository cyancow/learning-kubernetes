---
title: "Java 相关问题"
type: book
date: "2021-12-28"
---


## 相同镜像在部分机器上跑有问题

* 现象: 经常会有人说，我的 java 容器镜像，在 A 机器上跑的好好的，在 B 机器上就有问题，都是用的同一个容器镜像啊。
* 根因：java 类加载的顺序问题，如果有不同版本的重复 jar 包，只会加载其中一个，并且不保证顺序。
* 解决方案：业务去掉重复的 jar 包。
* 类似 case 的分析文章：https://www.jianshu.com/p/dcad5330b06f


## java 默认线程池的线程数问题

现象：java 应用创建大量线程。
根因：jdk1.8 212 版本以前，无法正确识别 cgroup 的 limit，所以 cpu 的数量及内存的大小是直接从宿主机获取的，跟 cgroup 里的 limit 不一致。
解决方案：业务升级。

